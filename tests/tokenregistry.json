{
  "types": {
    "TokenInfo": [
      {"field": "supply", "type": "Int"},
      {"field": "mintedBy", "type": "Agent"},
      {"field": "owner", "type": "Agent"},
      {"field": "created", "type": "Int"},
      {"field": "updated", "type": "Int"},
      {"field": "description", "type": "String"},
      {"field": "userDefined", "type": "String"}
    ]
  },
  "setups": {
    "default": {
      "caller": "@caller",
      "timestamp": 20201027172138,
      "balances": {"#iota": 100},
      "contract": {
        "name": "tokenregistry",
        "description": "Register colored tokens on the Tangle",
        "id": "@scId",
        "owner": "@scOwner"
      }
    }
  },
  "tests": [
    {
      "name": "mintSupply",
      "setup": "default",
      "function": "mintSupply",
      "incoming": {"#mint": "#token1", "#token1": 1},
      "params": {
        "description": "My very valuable token"
      },
      "expect": {
        "balances": {"#iota": 100, "#token1": 1},
        "state": {
          "registry": {
            "#token1": {
              "TokenInfo": {
                "supply": 1,
                "mintedBy": "@caller",
                "owner": "@caller",
                "created": 20201027172138,
                "updated": 20201027172138,
                "description": "My very valuable token",
                "userDefined": ""
              }
            }
          },
          "colorList": ["#token1"]
        },
        "logs": {},
        "calls": [],
        "posts": [],
        "views": [],
        "transfers": []
      }
    },
    {
      "name": "mintWithMissingDescription",
      "setup": "default",
      "function": "mintSupply",
      "incoming": {"#mint": "#token1", "#token1": 1},
      "params": {},
      "expect": {
        "balances": {"#iota": 100, "#token1": 1},
        "state": {
          "registry": {
            "#token1": {
              "TokenInfo": {
                "supply": 1,
                "mintedBy": "@caller",
                "owner": "@caller",
                "created": 20201027172138,
                "updated": 20201027172138,
                "description": "no dscr",
                "userDefined": ""
              }
            }
          },
          "colorList": ["#token1"]
        },
        "logs": {},
        "calls": [],
        "posts": [],
        "views": [],
        "transfers": []
      }
    },
    {
      "name": "mintWithMissingSupply",
      "setup": "default",
      "function": "mintSupply",
      "incoming": {"#mint": "#token1", "#iota": 1},
      "params": {
        "description": "Sending 1 iota instead of minting a token"
      },
      "expect": {
        "balances": {"#iota": 101},
        "state": {
          "registry": {
          },
          "colorList": []
        },
        "logs": {},
        "calls": [],
        "posts": [],
        "views": [],
        "transfers": []
      }
    },
    {
      "name": "mintSecondSupply",
      "setup": "default",
      "function": "mintSupply",
      "incoming": {"#mint": "#token1", "#token1": 1},
      "params": {
        "description": "My very valuable token"
      },
      "additionalRequests": [
        {
          "timestamp": 20201027172139,
          "caller": "@caller2",
          "function": "mintSupply",
          "incoming": {"#mint": "#token2", "#token2": 750},
          "params": {
            "description": "My shares in the IOTA Foundation",
            "userDefined": "Some user defined data"
          }
        }
      ],
      "expect": {
        "balances": {"#iota": 100, "#token1": 1, "#token2": 750},
        "state": {
          "registry": {
            "#token1": {
              "TokenInfo": {
                "supply": 1,
                "mintedBy": "@caller",
                "owner": "@caller",
                "created": 20201027172138,
                "updated": 20201027172138,
                "description": "My very valuable token",
                "userDefined": ""
              }
            },
            "#token2": {
              "TokenInfo": {
                "supply": 750,
                "mintedBy": "@caller2",
                "owner": "@caller2",
                "created": 20201027172139,
                "updated": 20201027172139,
                "description": "My shares in the IOTA Foundation",
                "userDefined": "Some user defined data"
              }
            }
          },
          "colorList": ["#token1", "#token2"]
        },
        "logs": {},
        "calls": [],
        "posts": [],
        "views": [],
        "transfers": []
      }
    }
  ]
}
